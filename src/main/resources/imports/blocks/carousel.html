<meta property="blocks:title" content="Slideshow" lang="en">
<meta property="blocks:title" content="Fotocarrousel" lang="nl">

<meta property="blocks:description" content="A carousel or slideshow for images." lang="en">
<meta property="blocks:description" content="Een carrousel die verschillende foto's weergeeft." lang="nl">

<meta property="blocks:icon" content="fa-file-image-o">

<link href="/assets/styles/imports/blocks-carousel.less" rel="stylesheet"/>

<script src="/assets/scripts/imports/blocks-carousel.js" type="application/javascript" data-scope-role="admin"></script>
<script src="/assets/scripts/imports/blocks-carousel-text.js" type="application/javascript" data-scope-role="admin"></script>

## we need this to be outside of the file above because it should always be called (also outside of the data-scope-role))
## Note that this is needed to auto-activate the carousel on page load
<script type="application/javascript">
    //init the carousels on the page
    $(document).ready(function ()
    {
        $('.carousel').carousel({});
    });
</script>

## widget needs the scripts of blocks-image (TODO refactor this in one file?)
<script src="/assets/scripts/imports/blocks-image.js" type="application/javascript" data-scope-role="admin"></script>

## widget needs the scripts of blocks-text (TODO refactor this in one file?)
<script src="/assets/scripts/imports/blocks-text/medium/medium-editor.js" type="application/javascript" data-scope-role="admin"></script>
<script src="/assets/scripts/imports/blocks-text/medium/medium-styles-extension.js" type="application/javascript" data-scope-role="admin"></script>
<script src="/assets/scripts/imports/blocks-text/medium/mediumModule.js" type="application/javascript" data-scope-role="admin"></script>

<script src="/assets/scripts/imports/blocks-text.js" type="application/javascript" data-scope-role="admin"></script>
<script src="/assets/scripts/imports/text.js" type="application/javascript" data-scope-role="admin"></script>
<script src="/assets/scripts/imports/blocks-text/styles.js" type="application/javascript" data-scope-role="admin"></script>

<template>
## note: the data-interval false needs to be there to fix an editing bug (where a paused carousel starts cycling again after clicking an arrow))
## keyboard was disabled because it messed with the editor
    <div id="carousel-123" class="carousel slide" data-interval="$CONSTANTS.blocks.core.CAROUSEL_DEFAULT_INTERVAL_MS" data-keyboard="false">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            #if ($PROPERTY['image'])
                #foreach($img in $PROPERTY['image'])
                    <li data-target="#carousel-123" data-slide-to="$foreach.index" class="#if ($foreach.index == 0) active #end"></li>
                #end
            #else
                <li data-target="#carousel-123" data-slide-to="0" class="active"></li>
            #end
        </ol>

        <!-- Wrapper for slides -->
        <!-- WARNING: don't add role="listbox", cause it blocks the editor events -->
        <div class="carousel-inner">
            #if ($PROPERTY['image'])
                #foreach($img in $PROPERTY['image'])
                    <div class="item #if ($foreach.index == 0)active#end">
                        $img
                        <div class="carousel-caption">
                            $!PROPERTY['title'][$foreach.index]
                            $!PROPERTY['description'][$foreach.index]
                        </div>
                    </div>
                #end
            #else
                <div class="item active">
                    <img property="image" src="/assets/images/blocks/placeholder_slide_1.jpg">

                    <div class="carousel-caption">
                        <span property="title" class="title" $CONSTANTS.blocks.core.TEXT_EDITOR_OPTIONS_ATTR="$CONSTANTS.blocks.core.TEXT_EDITOR_OPTIONS_NO_TOOLBAR">
                        <p>Enter a title, this is a test</p>
                        </span>
                        <span property="description" class="description" $CONSTANTS.blocks.core.TEXT_EDITOR_OPTIONS_ATTR="$CONSTANTS.blocks.core.TEXT_EDITOR_OPTIONS_NO_TOOLBAR">
                        <p>Enter a description</p>
                        </span>
                    </div>
                </div>
            #end
        </div>

        <!-- Controls -->
        <a class="left carousel-control" href="#carousel-123" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#carousel-123" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>

    </div>
</template>